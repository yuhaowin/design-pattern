单例模式: 保证一个类有且仅有一个实例,并提供一个全局访问点.

适用的场景: 想确保任何情况下都绝对只有一个实例;

在单服务情况下,网站的计数器.

线程池,数据连接池一般都是单例模式的

单例模式优点:
在内存中只有一个实例,减少内存开销 (特别对一个对象要频繁的创建销毁时,并且在创建和销毁时的性能无法优化时);
可以避免对资源的多重占用.(比如避免同时对一个文件的写操作等);
设置全局访问点,严格控制访问;

单例模式缺点:
没有接口,扩展困难;

单例模式的*重点*
私有构造器(为了禁止在单例类的外部通过构造器创建类的实例)
线程安全(在单例模式中,必须保证是线程安全的)
延迟加载(在需要类的对象的时候才进行创建)

加分项:
序列化和反序列化安全问题(对应单例对象)
反射(单例模式中要防止反射攻击)

单例模式和工厂模式
在一些业务场景中,常常把工厂类设计成单例的

单例模式和享元模式

![](https://ws3.sinaimg.cn/large/006tNbRwgy1fxeyiyj09jj316f0u0nem.jpg)

![](https://ws3.sinaimg.cn/large/006tNbRwgy1fxeykfru1pj31je0u0kf8.jpg)

![](https://ws3.sinaimg.cn/large/006tNbRwgy1fxezasxynij31kw0u07ty.jpg)

在java中有5种情况第一次出现时会使得一个类会被立刻初始化:

* 一个类的实例被创建,该类会被初始化;
* 一个类中声明的一个静态方法被调用,该类会被初始化;
* 一个类中声明的一个静态成员变量被赋值,该类会被初始化;
* 一个类中声明的一个静态成员变量被使用,并且该成员变量不是一个常量,该类会被初始化;
* 这个类是一个顶级类,且类中含有断言语句;